import { Agent } from '../types/agents';

export const mockAgents: Agent[] = [
  {
    id: 'agent_1',
    agentId: 'AGT001',
    firstName: 'Karthik',
    lastName: 'Nair',
    email: 'karthik.nair@agents.ramnirmalchits.com',
    phone: '+91 98765 43217',
    alternatePhone: '+91 98765 43218',
    dateOfBirth: '1989-08-12',
    gender: 'male',
    maritalStatus: 'married',
    address: '456 Jayanagar, Bangalore',
    city: 'Bangalore',
    state: 'Karnataka',
    country: 'India',
    postalCode: '560041',
    designation: 'Senior Sales Agent',
    department: 'Sales & Marketing',
    branch: 'Bangalore South',
    branchId: 'branch_2',
    joiningDate: '2021-03-10',
    employmentType: 'permanent',
    workLocation: 'field',
    reportingManager: 'Rajesh Kumar',
    teamMembers: [],
    territory: 'South Bangalore',
    coverageArea: ['Jayanagar', 'BTM Layout', 'JP Nagar', 'Banashankari'],
    transportMode: 'bike',
    monthlyTarget: 500000,
    quarterlyTarget: 1500000,
    yearlyTarget: 6000000,
    currentMonthAchievement: 425000,
    currentQuarterAchievement: 1200000,
    currentYearAchievement: 3800000,
    commissionStructure: {
      baseCommission: 2.5,
      bonusThreshold: 110,
      bonusCommission: 1.0,
      penaltyThreshold: 80,
      penaltyDeduction: 0.5
    },
    totalCustomers: 85,
    activeCustomers: 78,
    newCustomersThisMonth: 12,
    customerRetentionRate: 92.5,
    totalSales: 3800000,
    monthlyEarnings: 12500,
    quarterlyEarnings: 35000,
    yearlyEarnings: 95000,
    pendingCommissions: 8500,
    currentRank: 2,
    previousRank: 3,
    rankingCategory: 'star',
    achievements: [],
    skills: ['Customer Relations', 'Chit Fund Sales', 'Territory Management', 'Digital Marketing'],
    certifications: ['Certified Sales Professional', 'Financial Products Specialist'],
    trainingCompleted: ['Sales Fundamentals', 'Customer Service Excellence', 'Digital Tools'],
    trainingPending: ['Advanced Negotiation', 'Leadership Skills'],
    status: 'active',
    lastLogin: '2024-03-14T18:30:00',
    loginCount: 324,
    emergencyContact: {
      name: 'Meera Nair',
      relationship: 'Spouse',
      phone: '+91 98765 43219'
    },
    createdAt: '2021-03-10',
    createdBy: 'rajesh.kumar@ramnirmalchits.com',
    updatedAt: '2024-03-14',
    updatedBy: 'karthik.nair@agents.ramnirmalchits.com',
    notes: 'Top performing agent with excellent customer relationships'
  },
  {
    id: 'agent_2',
    agentId: 'AGT002',
    firstName: 'Vikram',
    lastName: 'Singh',
    email: 'vikram.singh@agents.ramnirmalchits.com',
    phone: '+91 98765 43221',
    dateOfBirth: '1986-04-18',
    gender: 'male',
    maritalStatus: 'married',
    address: '321 HSR Layout, Bangalore',
    city: 'Bangalore',
    state: 'Karnataka',
    country: 'India',
    postalCode: '560102',
    designation: 'Field Sales Agent',
    department: 'Sales & Marketing',
    branch: 'Bangalore East',
    branchId: 'branch_3',
    joiningDate: '2020-11-20',
    employmentType: 'permanent',
    workLocation: 'field',
    reportingManager: 'Rajesh Kumar',
    teamMembers: [],
    territory: 'East Bangalore',
    coverageArea: ['HSR Layout', 'Koramangala', 'Sarjapur', 'Whitefield'],
    transportMode: 'car',
    monthlyTarget: 600000,
    quarterlyTarget: 1800000,
    yearlyTarget: 7200000,
    currentMonthAchievement: 520000,
    currentQuarterAchievement: 1650000,
    currentYearAchievement: 4200000,
    commissionStructure: {
      baseCommission: 3.0,
      bonusThreshold: 105,
      bonusCommission: 1.5,
      penaltyThreshold: 75,
      penaltyDeduction: 1.0
    },
    totalCustomers: 120,
    activeCustomers: 110,
    newCustomersThisMonth: 18,
    customerRetentionRate: 88.5,
    totalSales: 4200000,
    monthlyEarnings: 18500,
    quarterlyEarnings: 52000,
    yearlyEarnings: 126000,
    pendingCommissions: 12000,
    currentRank: 1,
    previousRank: 1,
    rankingCategory: 'champion',
    achievements: [],
    skills: ['Field Sales', 'Customer Onboarding', 'Market Research', 'Team Leadership'],
    certifications: ['Advanced Sales Techniques', 'Customer Relationship Management'],
    trainingCompleted: ['Sales Mastery', 'Leadership Development', 'Market Analysis'],
    trainingPending: ['Digital Transformation'],
    status: 'active',
    lastLogin: '2024-03-15T08:45:00',
    loginCount: 567,
    emergencyContact: {
      name: 'Simran Singh',
      relationship: 'Spouse',
      phone: '+91 98765 43222'
    },
    createdAt: '2020-11-20',
    createdBy: 'rajesh.kumar@ramnirmalchits.com',
    updatedAt: '2024-03-15',
    updatedBy: 'vikram.singh@agents.ramnirmalchits.com',
    notes: 'Experienced field agent with strong rural market presence'
  },
  {
    id: 'agent_3',
    agentId: 'AGT003',
    firstName: 'Priya',
    lastName: 'Reddy',
    email: 'priya.reddy@agents.ramnirmalchits.com',
    phone: '+91 98765 43225',
    dateOfBirth: '1991-06-22',
    gender: 'female',
    maritalStatus: 'single',
    address: '789 Marathahalli, Bangalore',
    city: 'Bangalore',
    state: 'Karnataka',
    country: 'India',
    postalCode: '560037',
    designation: 'Sales Agent',
    department: 'Sales & Marketing',
    branch: 'Bangalore East',
    branchId: 'branch_3',
    joiningDate: '2022-01-15',
    employmentType: 'permanent',
    workLocation: 'hybrid',
    reportingManager: 'Vikram Singh',
    teamMembers: [],
    territory: 'Central Bangalore',
    coverageArea: ['Marathahalli', 'Brookefield', 'ITPL', 'Varthur'],
    transportMode: 'bike',
    monthlyTarget: 400000,
    quarterlyTarget: 1200000,
    yearlyTarget: 4800000,
    currentMonthAchievement: 380000,
    currentQuarterAchievement: 1100000,
    currentYearAchievement: 2900000,
    commissionStructure: {
      baseCommission: 2.0,
      bonusThreshold: 110,
      bonusCommission: 0.8,
      penaltyThreshold: 85,
      penaltyDeduction: 0.3
    },
    totalCustomers: 65,
    activeCustomers: 58,
    newCustomersThisMonth: 8,
    customerRetentionRate: 89.2,
    totalSales: 2900000,
    monthlyEarnings: 9500,
    quarterlyEarnings: 28000,
    yearlyEarnings: 58000,
    pendingCommissions: 6200,
    currentRank: 3,
    previousRank: 4,
    rankingCategory: 'performer',
    achievements: [],
    skills: ['Digital Marketing', 'Customer Acquisition', 'Social Media', 'Lead Generation'],
    certifications: ['Digital Sales Certification'],
    trainingCompleted: ['Digital Sales', 'Customer Psychology', 'Social Media Marketing'],
    trainingPending: ['Advanced Analytics', 'Team Management'],
    status: 'active',
    lastLogin: '2024-03-14T19:15:00',
    loginCount: 189,
    emergencyContact: {
      name: 'Lakshmi Reddy',
      relationship: 'Mother',
      phone: '+91 98765 43226'
    },
    createdAt: '2022-01-15',
    createdBy: 'vikram.singh@agents.ramnirmalchits.com',
    updatedAt: '2024-03-14',
    updatedBy: 'priya.reddy@agents.ramnirmalchits.com',
    notes: 'Promising young agent with strong digital skills'
  },
  {
    id: 'agent_4',
    agentId: 'AGT004',
    firstName: 'Suresh',
    lastName: 'Kumar',
    email: 'suresh.kumar@agents.ramnirmalchits.com',
    phone: '+91 98765 43227',
    dateOfBirth: '1984-12-08',
    gender: 'male',
    maritalStatus: 'married',
    address: '654 Rajajinagar, Bangalore',
    city: 'Bangalore',
    state: 'Karnataka',
    country: 'India',
    postalCode: '560010',
    designation: 'Senior Field Agent',
    department: 'Sales & Marketing',
    branch: 'Bangalore West',
    branchId: 'branch_4',
    joiningDate: '2019-08-05',
    employmentType: 'permanent',
    workLocation: 'field',
    reportingManager: 'Rajesh Kumar',
    teamMembers: ['agent_5'],
    territory: 'West Bangalore',
    coverageArea: ['Rajajinagar', 'Vijayanagar', 'Basaveshwaranagar', 'Malleshwaram'],
    transportMode: 'bike',
    monthlyTarget: 550000,
    quarterlyTarget: 1650000,
    yearlyTarget: 6600000,
    currentMonthAchievement: 465000,
    currentQuarterAchievement: 1400000,
    currentYearAchievement: 3600000,
    commissionStructure: {
      baseCommission: 2.8,
      bonusThreshold: 108,
      bonusCommission: 1.2,
      penaltyThreshold: 82,
      penaltyDeduction: 0.8
    },
    totalCustomers: 95,
    activeCustomers: 85,
    newCustomersThisMonth: 10,
    customerRetentionRate: 90.8,
    totalSales: 3600000,
    monthlyEarnings: 14200,
    quarterlyEarnings: 42000,
    yearlyEarnings: 100800,
    pendingCommissions: 9800,
    currentRank: 4,
    previousRank: 2,
    rankingCategory: 'performer',
    achievements: [],
    skills: ['Customer Retention', 'Territory Management', 'Rural Marketing', 'Relationship Building'],
    certifications: ['Territory Management Specialist', 'Customer Service Excellence'],
    trainingCompleted: ['Territory Planning', 'Customer Retention', 'Rural Sales'],
    trainingPending: ['Digital Tools'],
    status: 'active',
    lastLogin: '2024-03-13T17:20:00',
    loginCount: 445,
    emergencyContact: {
      name: 'Kavitha Kumar',
      relationship: 'Spouse',
      phone: '+91 98765 43228'
    },
    createdAt: '2019-08-05',
    createdBy: 'rajesh.kumar@ramnirmalchits.com',
    updatedAt: '2024-03-13',
    updatedBy: 'suresh.kumar@agents.ramnirmalchits.com',
    notes: 'Experienced agent with strong customer relationships'
  },
  {
    id: 'agent_5',
    agentId: 'AGT005',
    firstName: 'Anjali',
    lastName: 'Sharma',
    email: 'anjali.sharma@agents.ramnirmalchits.com',
    phone: '+91 98765 43229',
    dateOfBirth: '1993-02-14',
    gender: 'female',
    maritalStatus: 'single',
    address: '123 Indiranagar, Bangalore',
    city: 'Bangalore',
    state: 'Karnataka',
    country: 'India',
    postalCode: '560038',
    designation: 'Junior Sales Agent',
    department: 'Sales & Marketing',
    branch: 'Bangalore Central',
    branchId: 'branch_8',
    joiningDate: '2023-06-01',
    employmentType: 'contract',
    workLocation: 'hybrid',
    reportingManager: 'Suresh Kumar',
    teamMembers: [],
    territory: 'Central Bangalore',
    coverageArea: ['Indiranagar', 'Domlur', 'Ulsoor', 'Shivajinagar'],
    transportMode: 'public',
    monthlyTarget: 300000,
    quarterlyTarget: 900000,
    yearlyTarget: 3600000,
    currentMonthAchievement: 285000,
    currentQuarterAchievement: 820000,
    currentYearAchievement: 1800000,
    commissionStructure: {
      baseCommission: 1.8,
      bonusThreshold: 115,
      bonusCommission: 0.7,
      penaltyThreshold: 90,
      penaltyDeduction: 0.2
    },
    totalCustomers: 45,
    activeCustomers: 42,
    newCustomersThisMonth: 6,
    customerRetentionRate: 93.3,
    totalSales: 1800000,
    monthlyEarnings: 6800,
    quarterlyEarnings: 19500,
    yearlyEarnings: 32400,
    pendingCommissions: 4200,
    currentRank: 5,
    previousRank: 6,
    rankingCategory: 'rookie',
    achievements: [],
    skills: ['Social Media Marketing', 'Customer Acquisition', 'Digital Communication'],
    certifications: ['Basic Sales Training'],
    trainingCompleted: ['Sales Basics', 'Product Knowledge', 'Customer Communication'],
    trainingPending: ['Advanced Sales', 'Territory Management', 'Leadership Basics'],
    status: 'active',
    lastLogin: '2024-03-15T12:30:00',
    loginCount: 156,
    emergencyContact: {
      name: 'Rajesh Sharma',
      relationship: 'Father',
      phone: '+91 98765 43230'
    },
    createdAt: '2023-06-01',
    createdBy: 'suresh.kumar@agents.ramnirmalchits.com',
    updatedAt: '2024-03-15',
    updatedBy: 'anjali.sharma@agents.ramnirmalchits.com',
    notes: 'Promising new agent with strong digital skills'
  },
  {
    id: 'agent_6',
    agentId: 'AGT006',
    firstName: 'Ramesh',
    lastName: 'Gupta',
    email: 'ramesh.gupta@agents.ramnirmalchits.com',
    phone: '+91 98765 43231',
    dateOfBirth: '1987-09-15',
    gender: 'male',
    maritalStatus: 'married',
    address: '567 Anna Salai, Chennai',
    city: 'Chennai',
    state: 'Tamil Nadu',
    country: 'India',
    postalCode: '600017',
    designation: 'Territory Manager',
    department: 'Sales & Marketing',
    branch: 'Chennai Branch',
    branchId: 'branch_5',
    joiningDate: '2020-12-15',
    employmentType: 'permanent',
    workLocation: 'field',
    reportingManager: 'Priya Reddy',
    teamMembers: ['agent_7'],
    territory: 'Chennai Central',
    coverageArea: ['T. Nagar', 'Adyar', 'Velachery', 'Tambaram'],
    transportMode: 'car',
    monthlyTarget: 650000,
    quarterlyTarget: 1950000,
    yearlyTarget: 7800000,
    currentMonthAchievement: 580000,
    currentQuarterAchievement: 1750000,
    currentYearAchievement: 4500000,
    commissionStructure: {
      baseCommission: 3.2,
      bonusThreshold: 105,
      bonusCommission: 1.8,
      penaltyThreshold: 75,
      penaltyDeduction: 1.2
    },
    totalCustomers: 140,
    activeCustomers: 125,
    newCustomersThisMonth: 20,
    customerRetentionRate: 89.3,
    totalSales: 4500000,
    monthlyEarnings: 20500,
    quarterlyEarnings: 58000,
    yearlyEarnings: 144000,
    pendingCommissions: 14500,
    currentRank: 1,
    previousRank: 2,
    rankingCategory: 'champion',
    achievements: [],
    skills: ['Territory Management', 'Team Leadership', 'Market Development', 'Customer Relations'],
    certifications: ['Territory Management Expert', 'Leadership Excellence'],
    trainingCompleted: ['Leadership Development', 'Territory Planning', 'Market Analysis'],
    trainingPending: [],
    status: 'active',
    lastLogin: '2024-03-15T09:15:00',
    loginCount: 678,
    emergencyContact: {
      name: 'Sunita Gupta',
      relationship: 'Spouse',
      phone: '+91 98765 43232'
    },
    createdAt: '2020-12-15',
    createdBy: 'priya.reddy@ramnirmalchits.com',
    updatedAt: '2024-03-15',
    updatedBy: 'ramesh.gupta@agents.ramnirmalchits.com',
    notes: 'Top performing territory manager with excellent team leadership'
  }
];

export const getAgents = (): Agent[] => {
  const saved = localStorage.getItem('agents_data');
  if (saved) {
    try {
      const parsed = JSON.parse(saved);
      return Array.isArray(parsed) && parsed.length > 0 ? parsed : mockAgents;
    } catch (error) {
      console.error('Failed to load agents:', error);
      return mockAgents;
    }
  }
  return mockAgents;
};

export const getActiveAgents = (): Agent[] => {
  return getAgents().filter(agent => agent.status === 'active');
};

export const getAgentsByBranch = (branchName: string): Agent[] => {
  return getActiveAgents().filter(agent => agent.branch === branchName);
};

export const getAgentsByBranchId = (branchId: string): Agent[] => {
  return getActiveAgents().filter(agent => agent.branchId === branchId);
};

export const getAgentById = (id: string): Agent | undefined => {
  return getAgents().find(agent => agent.id === id);
};

export const saveAgents = (agents: Agent[]) => {
  try {
    localStorage.setItem('agents_data', JSON.stringify(agents));
    window.dispatchEvent(new CustomEvent('agentsUpdated'));
  } catch (error) {
    console.error('Failed to save agents:', error);
  }
};

export const initializeAgentsData = () => {
  try {
    const existingAgents = getAgents();
    if (existingAgents.length === 0) {
      saveAgents(mockAgents);
    }
  } catch (error) {
    console.error('Error initializing agents data:', error);
    saveAgents(mockAgents);
  }
};